(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,function(e,t){e.exports={CALENDAR_ID:"jon@montrealoutrigger.com",GOOGLE_API_KEY:"AIzaSyDT6INuV1nc8NlIQ_wKlEFzLANZ-5YHQQg",GOOGLE_CLIENT_ID:"179091296192-hhuil5j1tb3j90c6pej52c24hjkrkm4m.apps.googleusercontent.com",SCOPES:"https://www.googleapis.com/auth/calendar https://www.googleapis.com/auth/calendar.events"}},,,,,,function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},,,function(e,t,n){e.exports=n(20)},,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(5),c=n.n(r),i=(n(17),n(3)),s=n(6),l=n(9),u=n(7),d=n(10),m=n(1),h=n.n(m),f=n(8),E=n.n(f),g=(n(19),n(2)),v=window.gapi,p="timeMin=".concat(h()().toISOString(),"&timeMax=").concat(h()().add(2,"w").toISOString()),w=new function e(){Object(i.a)(this,e),this.authenticate=function(){return v.load("auth2",function(){return v.auth2.init({apiKey:g.GOOGLE_API_KEY,clientId:g.GOOGLE_CLIENT_ID,scope:g.SCOPES}).then(function(){return v.auth2.getAuthInstance().signIn().then(function(e){return console.log("all",e)})})})},this.getEvents=function(e){return v.load("client:auth2",function(){return v.client.init({apiKey:g.GOOGLE_API_KEY,clientId:g.GOOGLE_CLIENT_ID,scope:g.SCOPES}).then(function(){return v.client.request({path:"".concat("https://www.googleapis.com/calendar/v3","/calendars/").concat(g.CALENDAR_ID,"/events?").concat(p)}).then(function(e){return e.result.items.filter(function(e){return"cancelled"!==e.status})}).then(function(t){e(t.sort(function(e,t){return h()(e.start.dateTime)-h()(t.start.dateTime)}))}).then(function(){return v.client.load("calendar","v3",function(){return console.log("Google Calendar loaded")})}).catch(console.error)})})},this.deleteDelinquents=function(){return null},this.deleteEvent=function(e){return v.client.calendar.events.delete({calendarId:g.CALENDAR_ID,eventId:e}).execute(function(e){e&&alert("Event deleted!")})}},N=new function e(){Object(i.a)(this,e),this.getAllReservations=function(e){return e},this.getAllGunJumpers=function(e){return e.filter(function(e){return h()(e.created).isBefore(h()(e.start.dateTime).subtract(96,"hours"))})},this.getAllRushHourHoggers=function(e){return e}},O=96,_=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this)))._getEvents=function(){w.getEvents(function(t){return e.setState({events:t},function(){return console.log(e.state.events)})})},e._addDates=function(e){var t=[],n=h()().format("ddd DD MMM"),a=function(e){return h()(e).format("ddd DD MMM")};return e.forEach(function(e,o){var r;(!o||a(e.start.dateTime)!==n)&&(n=a(e.start.dateTime),r=n,t.push({dateLine:r})),t.push(e)}),t},e._renderEvent=function(t){return t.dateLine?o.a.createElement("p",{className:"date-title"},t.dateLine):o.a.createElement("div",{onClick:function(){console.log(t)},className:"list-card ".concat(h()(t.created).isSameOrAfter(h()(t.start.dateTime).subtract(O,"hours"))?"":"delinquent")},o.a.createElement("div",{className:"row"},o.a.createElement("p",{className:"first-row text"},t.summary),o.a.createElement("p",{className:"first-row text"},h()(t.start.dateTime).format("h:mm A"))),o.a.createElement("div",{className:"row"},o.a.createElement("p",{className:"text"},e._getAttendeeEmail(t))),o.a.createElement("div",{className:"row"},o.a.createElement("p",{className:"text"},"Booked ",h()(t.created).format("DD MMM, h:mm A")," (",h()(t.start.dateTime).diff(h()(t.created),"hours")," ","hours early)")))},e._getAttendeeEmail=function(e){var t="< No email >";return e.attendees.forEach(function(e){"jon@montrealoutrigger.com"!==e.email&&(t=e.email)}),t},e.state={events:[]},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){console.log("DidMount"),w.authenticate(),this._getEvents()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement("img",{src:E.a,className:"App-logo",alt:"logo"}),o.a.createElement("div",{className:"button",onClick:this._getEvents},"Refresh list"),o.a.createElement("div",{className:"button",onClick:function(){N.getAllGunJumpers(e.state.events).forEach(function(e){console.log(e)})}},"Delete Delinquents"),o.a.createElement("div",{className:"events"},this.state.events?this._addDates(this.state.events).map(this._renderEvent):null)))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[11,1,2]]]);
//# sourceMappingURL=main.cd2530c3.chunk.js.map